## Background Synchronization API

```
ğŸˆë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸: ì´ ê¸°ëŠ¥ì€ ì¼ë¶€ ë˜ëŠ” ëª¨ë“  ì§€ì› ë¸Œë¼ìš°ì € ì˜ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ (HTTPS) ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ .
```

`service worker`ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” APIëŠ” ì‚¬ìš©ìê°€ ì•ˆì •ì ì¸ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ê°€ì§ˆ ë•Œê¹Œì§€ ì‹¤í–‰í•  ì‘ì—…ì„ ì—°ê¸°í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤ .

### ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ê°œë… ë° ì‚¬ìš©ë²•

ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” APIë¥¼ ì‚¬ìš©í•˜ë©´ ì¥ì¹˜ê°€ ì˜¤í”„ë¼ì¸ì¸ ê²½ìš° ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ì„œë²„ ë™ê¸°í™” ì‘ì—…ì„ ì„œë¹„ìŠ¤ ì‘ì—…ìì—ê²Œ ì—°ê¸°í•˜ì—¬ ë‚˜ì¤‘ì— ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ìš© í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©ë˜ëŠ” ë™ì•ˆ ë³´ë‚¼ ìˆ˜ ì—†ëŠ” ê²½ìš° ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ìš©ë„ì— í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì´ë©”ì¼ í´ë¼ì´ì–¸íŠ¸ ì‘ìš© í”„ë¡œê·¸ë¨ì€ ì¥ì¹˜ì— ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ì—†ëŠ” ê²½ìš°ì—ë„ ì‚¬ìš©ìê°€ ì–¸ì œë“ ì§€ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ê³  ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡ íŠ¸ì—”ë“œëŠ” ë™ê¸°í™” ìš”ì²­ì„ ë“±ë¡í•˜ê¸°ë§Œ í•˜ë©´ ì„œë¹„ìŠ¤ ì›Œì»¤ëŠ” ë„¤íŠ¸ì›Œí¬ê°€ ë‹¤ì‹œ ì¡´ì¬í•˜ê³  ë™ê¸°í™”ë¥¼ ì²˜ë¦¬í•  ë•Œ ê²½ê³ ë¥¼ ë°›ìŠµë‹ˆë‹¤.

`SyncManager`ì¸í„°í˜ì´ìŠ¤ëŠ” ë¥¼ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ `ServiceWorkerRegistration.sync.` ê³ ìœ í•œ íƒœê·¸ ì‹ë³„ìê°€ ë™ê¸°í™” ì´ë²¤íŠ¸ 'ì´ë¦„'ìœ¼ë¡œ ì„¤ì •ë˜ì–´ `ServiceWorker`ìŠ¤í¬ë¦½íŠ¸ ë‚´ì—ì„œ ìˆ˜ì‹ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²¤íŠ¸ê°€ ìˆ˜ì‹ ë˜ë©´ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒê³¼ ê°™ì€ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ê¸°ëŠ¥ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ APIëŠ” `ì„œë¹„ìŠ¤ ì›Œì»¤ì— ì˜ì¡´`í•˜ë¯€ë¡œ ì´ APIì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì€ `ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©`í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
ì°¸ê³ : ì‘ì„± ë‹¹ì‹œ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” APIëŠ” ì„¤ì¹˜ëœ í”„ë¡œê·¸ë ˆì‹œë¸Œ ì›¹ ì•± ì„ í†µí•´ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

### ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ì¸í„°í˜ì´ìŠ¤

### SyncManager

ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í†µí•´ ë‚˜ì¤‘ì— ì„œë¹„ìŠ¤ ì›Œì»¤ì—ì„œ ì‹¤í–‰í•  ì‘ì—…ì„ ë“±ë¡í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ì‘ì—…ì„ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ìš”ì²­ ì´ë¼ê³  í•©ë‹ˆë‹¤ .

### SyncEvent

ServiceWorkerì˜ global scopeë¡œ ì „ì†¡ëœ ë™ê¸°í™” ì´ë²¤íŠ¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤ . ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í†µí•´ ì„œë¹„ìŠ¤ ì‘ì—…ìì—ì„œ ì‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì„œë¹„ìŠ¤ ì›Œì»¤ ì¶”ê°€

Service Worker API ì— ëŒ€í•œ ë‹¤ìŒ ì¶”ê°€ ì‚¬í•­ì€ Background Syncë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì§„ì…ì ì„ ì œê³µí•˜ê¸° ìœ„í•´ Background Sync ì‚¬ì–‘ì— ì§€ì •ë©ë‹ˆë‹¤.

- ServiceWorkerRegistration.sync (Read Only)

  SyncManagerë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¡œ ì‹¤í–‰í•  ì‘ì—…ì„ ë“±ë¡í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë°˜í™˜ í•©ë‹ˆë‹¤.

* ServiceWorkerGlobalScope.onsync

  ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ syncì…ë‹ˆë‹¤.

  ì´ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²½ìš° ì¦‰ì‹œ ë°œìƒí•˜ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ì¦‰ì‹œ ë°œìƒí•©ë‹ˆë‹¤.

### ì˜ˆ

ë‹¤ìŒ ì˜ˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

#### ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ìš”ì²­

ë‹¤ìŒ ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” íƒìƒ‰ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™”ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

```javascript
async function syncMessagesLater() {
  const registration = await navigator.serviceWorker.ready;
  try {
    await registration.sync.register("sync-messages");
  } catch {
    console.log("Background Sync could not be registered!");
  }
}
```

#### íƒœê·¸ë¡œ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” í™•ì¸

ì´ ì½”ë“œëŠ” ì§€ì •ëœ íƒœê·¸ê°€ ìˆëŠ” ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ì‘ì—…ì´ ë“±ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

```javascript
navigator.serviceWorker.ready.then((registration) => {
  registration.sync.getTags().then((tags) => {
    if (tags.includes("sync-messages"))
      console.log("Messages sync already requested");
  });
});
```

#### ì„œë¹„ìŠ¤ ì›Œì»¤ ë‚´ì—ì„œ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ìˆ˜ì‹  ëŒ€ê¸°

ë‹¤ìŒ ì˜ˆëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ì—ì„œ ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™” ì´ë²¤íŠ¸ì— ì‘ë‹µí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

```javascript
self.addEventListener("sync", (event) => {
  if (event.tag == "sync-messages") {
    event.waitUntil(sendOutboxMessages());
  }
});
```
